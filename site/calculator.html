<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CO2 Emissions Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        input, output {
            margin-bottom: 15px;
        }

        .tree-slider {
            margin-bottom: 30px;
        }

        .result-section, .input-section {
            display: flex;
            justify-content: flex-start;
            align-items: baseline;
            margin-bottom: 10px;
        }

        input[type=number]::-webkit-inner-spin-button,  
        input[type=number]::-webkit-outer-spin-button {  
            -webkit-appearance: none;  
            margin:  0;  
        }

        input[type=number] {
            -moz-appearance: textfield;
            appearance: textfield;
        }
    </style>
</head>
<body>
    <h1>CO2 Emissions Calculator</h1>

    <div class="input-section">
        <label for="co2Input">CO2 Emissions:&nbsp;</label>
        <input type="number" id="co2Input" placeholder="Enter CO2 emissions" aria-labelledby="co2Label" />
        &nbsp;tons
    </div>

    <div class="tree-slider">
        <input type="checkbox" id="tree1Checkbox" onclick="toggleTree('tree1')" />
        <label for="tree1Checkbox">Enable Tree Type 1</label>
        <input type="range" id="tree1" min="0" max="100" step="1" value="0" aria-labelledby="tree1Label" disabled />
        <output id="tree1Output">0 trees</output>
    </div>

    <div class="tree-slider">
        <input type="checkbox" id="tree2Checkbox" onclick="toggleTree('tree2')" />
        <label for="tree2Checkbox">Enable Tree Type 2</label>
        <input type="range" id="tree2" min="0" max="100" step="1" value="0" aria-labelledby="tree2Label" disabled />
        <output id="tree2Output">0 trees</output>
    </div>

    <div class="tree-slider">
        <input type="checkbox" id="tree3Checkbox" onclick="toggleTree('tree3')" />
        <label for="tree3Checkbox">Enable Tree Type 3</label>
        <input type="range" id="tree3" min="0" max="100" step="1" value="0" aria-labelledby="tree3Label" disabled />
        <output id="tree3Output">0 trees</output>
    </div>

    <div class="input-section">
        <label for="costInput">Cost:&nbsp;</label>
        <input type="number" id="costInput" placeholder="Enter cost" aria-labelledby="costLabel" />
        &nbsp;$
    </div>

    <h2>Calculator Results</h2>

    <div class="result-section">
        <div id="resultCO2Label">Net CO2 Emissions:&nbsp;</div>
        <output id="resultCO2" aria-labelledby="resultCO2Label">0 gCO2</output>
    </div>

    <div class="result-section">
        <div id="totalPriceLabel">Total Price:&nbsp;</div>
        <output id="totalPrice" aria-labelledby="totalPriceLabel">$0</output>
    </div>

    <script>
        // Function to toggle tree slider
        function toggleTree(treeId) {
            const checkbox = document.getElementById(treeId + 'Checkbox');
            const slider = document.getElementById(treeId);
            slider.disabled = !checkbox.checked;
            if (!checkbox.checked) {
                slider.value = 0;
                updateTreeQuantity(treeId, treeId + 'Output');
            }
        }

        // Function to update tree quantity output
        function updateTreeQuantity(sliderId, outputId) {
            const slider = document.getElementById(sliderId);
            const output = document.getElementById(outputId);
            const hundrethRootOf100001 = 1.1220185665
            const sliderValue = Math.round(Math.pow(hundrethRootOf100001, slider.value));
            output.textContent = `${sliderValue-1} Trees`;
            calculateResults();
        }

        // Function to calculate and update results
        function calculateResults() {
            const co2Input = parseFloat(document.getElementById('co2Input').value) || 0;
            let totalCO2Reduction = 0;
            let totalPrice = 0;

            // Tree 1
            const tree1Quantity = parseInt(document.getElementById('tree1Output').textContent.split(" ")[0]) || 0;
            const tree1CO2Absorption = 10; // replace with actual CO2 absorption rate
            const tree1Price = 5; // replace with actual price
            totalCO2Reduction += tree1Quantity * tree1CO2Absorption;
            totalPrice += tree1Quantity * tree1Price;

            // Tree 2
            const tree2Quantity = parseInt(document.getElementById('tree2Output').textContent.split(" ")[0]) || 0;
            const tree2CO2Absorption = 15; // replace with actual CO2 absorption rate
            const tree2Price = 8; // replace with actual price
            totalCO2Reduction += tree2Quantity * tree2CO2Absorption;
            totalPrice += tree2Quantity * tree2Price;

            // Tree 3
            const tree3Quantity = parseInt(document.getElementById('tree3Output').textContent.split(" ")[0]) || 0;
            const tree3CO2Absorption = 20; // replace with actual CO2 absorption rate
            const tree3Price = 10; // replace with actual price
            totalCO2Reduction += tree3Quantity * tree3CO2Absorption;
            totalPrice += tree3Quantity * tree3Price;

            // Update results
            const resultCO2 = document.getElementById('resultCO2');
            const totalPriceOutput = document.getElementById('totalPrice');
            resultCO2.textContent = `${co2Input - totalCO2Reduction} gCO2`;
            totalPriceOutput.textContent = `$${totalPrice}`;
        }

        // Event listeners for tree sliders
        document.getElementById('tree1').addEventListener('input', function() {
            updateTreeQuantity('tree1', 'tree1Output');
        });

        document.getElementById('tree2').addEventListener('input', function() {
            updateTreeQuantity('tree2', 'tree2Output');
        });

        document.getElementById('tree3').addEventListener('input', function() {
            updateTreeQuantity('tree3', 'tree3Output');
        });

        // Event listener for CO2 input
        document.getElementById('co2Input').addEventListener('input', function() {
            calculateResults();
        });

        // Event listener for cost input
        document.getElementById('costInput').addEventListener('input', function() {
            const costInputValue = parseFloat(this.value) || 0;
            const hundrethRootOf100001 = 1.1220185665;

            // Enable at least one tree if none are checked
            const checkedTrees = ['tree1Checkbox', 'tree2Checkbox', 'tree3Checkbox'].filter(id => document.getElementById(id).checked);
            if (checkedTrees.length === 0) {
                document.getElementById('tree1Checkbox').checked = true;
            }

            // Scale up the checked trees
            checkedTrees.forEach(treeId => {
                const sliderId = treeId.replace('Checkbox', '');
                document.getElementById(sliderId).value = Math.log(costInputValue + 1) / Math.log(hundrethRootOf100001);
                updateTreeQuantity(sliderId, sliderId + 'Output');
            });

            // Recalculate results
            calculateResults();
        });


        // Initial calculations
        calculateResults();
    </script>
</body>
</html>
